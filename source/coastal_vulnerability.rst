.. _coastal-vulnerability:

.. |openfold| image:: ./shared_images/openfolder.png
              :alt: open
	      :align: middle 

.. |addbutt| image:: ./shared_images/addbutt.png
             :alt: add
	     :align: middle 
	     :height: 15px

.. |okbutt| image:: ./shared_images/okbutt.png
            :alt: OK
	    :align: middle 

.. |adddata| image:: ./shared_images/adddata.png
             :alt: add
	     :align: middle 

***************************
Coastal Vulnerability Model
***************************

Summary
=======

Faced with a changing climate and a growing intensity of human activities, it is imperative for coastal communities to understand how development and changes in the biological and physical environment can affect their exposure to storm-induced erosion and inundation.  The InVEST Coastal Vulnerability model produces a qualitative estimate of such exposure, as well as a map of the location and size of human settlements. The Coastal Vulnerability Model maps the location of populations living near coastlines and their exposure to erosion and inundation during storms.  The model computes an Exposure Index, which differentiates areas with relatively high or low exposure to erosion and inundation.

The model does not take into account coastal processes that are unique to a region, nor does it predict change in the shoreline.  Model inputs, which serve as proxies for various complex shoreline processes that influence exposure to erosion and inundation, include: maps of coastal geomorphology, location of natural habitats (e.g., seagrass, kelps, wetlands, etc.), rates of net sea-level change, wind climate, and a depth profile that can be used as an indicator for surge level (default profile is the edge of the continental shelf).  Outputs of the model are maps of coastal human populations and a coastal exposure to erosion and inundation index map.  Outputs can be used to understand the relative contributions of different variables to coastal exposure and to highlight the protective services offered by natural habitats.  This information can help coastal managers, planners, landowners, and other stakeholder identify regions of greater risk to coastal hazards, which can in turn inform development strategies and permitting.  This is a "Tier 0" model.


Introduction
============

Coastal regions are constantly subject to the action of ocean waves and storms and naturally experience erosion and inundation over various temporal and spatial scales.  However, coastal erosion and inundation can also threaten human populations, activities, and infrastructure, especially within the context of a changing climate and increases in the number of people living in these areas.  Moreover, these increases in human pressure can lead to loss and degradation of coastal ecosystems and their ability to provide protection for humans during storms.  Thus, it is important to understand the role of various bio-geophysical factors in increasing or decreasing coastal erosion and inundation in order to better plan for future development.  It is also important to know how natural habitats can mitigate the forces responsible for coastal erosion and inundation so that any management action preserves the protection services provided by coastal ecosystems. 

A number of models estimate the vulnerability of coastal regions to long-term sea level rise, erosion, and inundation based on geophysical characteristics (Gornitz et al. 1991, Hammar-Klose and Thieler 2001, Cooper and McLaughlin 1998).  There are also methods to qualitatively estimate the relative role natural habitats play in reducing the risk of erosion and inundation of particular areas (WRI 2009, Bush et al. 2001).  However, few models estimate the relative vulnerability of coastal areas to erosion and inundation based on the bio-geophysical and social characteristics of a region.  It is our aim to fill that gap with the Coastal Vulnerability model.

The Coastal Vulnerability model produces a map of the location and size of human settlements as well as a qualitative index of coastal exposure to erosion and inundation.  The model does not value directly any ecosystem service, but ranks sites as having a relatively low, moderate or high risk of erosion and inundation, and maps the size of human population living near those sites.  It is relatively simple to use and quick to run, and it can be applied in most regions of the world with data that are, for the most part, relatively easy to obtain.  

Model outputs are easy to understand, and they are formatted in a way that enables users to manipulate them as they see fit.  They can be used to identify and distinguish segments of the coastline that are both populated by humans and vulnerable to natural hazard events.  They can also help users become familiar with the characteristics of their coastal region, and help highlight the relative role of natural habitats at reducing exposure.  Finally, outputs can be used to evaluate, in a simple way, how some management actions can increase or reduce exposure of human populations to the coastal hazards of erosion and inundation.
  

The model
=========

The InVEST Coastal Vulnerability model produces a Population map and an Exposure Index map.  The population map shows human population density near the coastal region of interest.  The Exposure Index map ranks the relative exposure of coastal regions and communities to erosion and inundation caused by large storms.  These maps are constructed using a global population density map and five bio-geophysical variables that represent the natural biological and geomorphic characteristics of a region, the amount of expected net sea-level rise, and the relative effects of storms.  Model outputs are relevant when computed for a relatively large coastal region.  They can be used to locate populated areas that are more (or less) exposed to erosion and inundation than others.  

How it works
------------

The model creates the population and exposure index maps using a mixture of raster GIS and user input datasets of population and five bio-geophysical variables:

1.	Geomorphology
2.  Relief
3.	Natural habitats (biotic and abiotic)
4.	Net sea level change
5.  Wind speed
4.	Wave Power
5.	Edge of continental shelf depth contour (or other depth contour that be used to estimate surge potential)

The outputs are mapped on the shoreline of the coastal region of interest with a user-defined spatial resolution (that can be as small as 250 meters).  We provide a default global, high resolution shoreline database (Wessel and Smith 1996) to represent coastlines of most regions of the world.  Below are details on how the output maps are created.

Social Exposure
^^^^^^^^^^^^^^^

When estimating the exposure of coastlines to erosion and inundation due to storms, it is important to consider the population of humans that will be subject to those hazard events.  Our Coastal Vulnerability model includes globally available population estimates for the coastal zone, which are derived from country-level census data.  To obtain a raster dataset that shows the estimated number of people residing in each coastal grid cell, we overlay this input dataset with the shoreline data.  We then assign each shoreline segment a population count by extracting the population count from the grid cell with the most overlap with the shoreline segment.

Exposure Index
^^^^^^^^^^^^^^

We compute the physical exposure index by combining the ranks of the five biological and physical variables at each shoreline segment.  Ranks vary from very low exposure (rank=1) to very high exposure (rank=5), based on a mixture of user- and model-defined criteria (see :ref:`table-41`).  A rank of 3 represents average exposure.  We built this ranking system based on methods proposed by Gornitz et al. (1990) and Hammar-Klose and Thieler (2001).  

.. _table-41:

Table 4.1
"""""""""
+--------------------------------------+--------------------------------------+------------------------------+------------------------------------------+--------------------------------------+--------------------------------------------+
| Rank                                 | Very Low                             | Low                          | Moderate                                 | High                                 | Very High                                  |
+--------------------------------------+--------------------------------------+------------------------------+------------------------------------------+--------------------------------------+--------------------------------------------+
| Variable                             | 1                                    | 2                            | 3                                        | 4                                    | 5                                          |
+======================================+======================================+==============================+==========================================+======================================+============================================+
| Geomorphology                        | Rocky; high cliffs; fiord; fiard     | Medium cliff; indented coast | Low cliff; glacial drift; alluvial plain | Cobble beach; estuary; lagoon; bluff | Barrier beach; sand beach; mud flat; delta |
+--------------------------------------+--------------------------------------+------------------------------+------------------------------------------+--------------------------------------+--------------------------------------------+
| Relief                               | <10th Percentile                     | <25th Percentile             | Average value                            | >75th Percentile                     | >90th Percentile                           |
+--------------------------------------+--------------------------------------+------------------------------+------------------------------------------+--------------------------------------+--------------------------------------------+
| Natural Habitats                     | Coral reef; mangrove; coastal forest | High dune; marsh             | Low dune                                 | Seagrass; kelp                       | No habitat                                 |
+--------------------------------------+--------------------------------------+------------------------------+------------------------------------------+--------------------------------------+--------------------------------------------+
| Sea Level Change                     | Net decrease                         |                              | ±1                                       |                                      | Net rise                                   |
+--------------------------------------+--------------------------------------+------------------------------+------------------------------------------+--------------------------------------+--------------------------------------------+
| Wind Exposure                        | <10th Percentile                     | <25th Percentile             | Average value                            | >75th Percentile                     | >90th Percentile                           |
+--------------------------------------+--------------------------------------+------------------------------+------------------------------------------+--------------------------------------+--------------------------------------------+
| Wave Exposure                        | <10th Percentile                     | <25th Percentile             | Average value                            | >75th Percentile                     | >90th Percentile                           |
+--------------------------------------+--------------------------------------+------------------------------+------------------------------------------+--------------------------------------+--------------------------------------------+
| Surge Potential                      | No exposure                          | <25th Percentile             | Average value                            | >75th Percentile                     | >90th Percentile                           |
+--------------------------------------+--------------------------------------+------------------------------+------------------------------------------+--------------------------------------+--------------------------------------------+

Table 4.1: List of Bio-Geophysical Variables and Ranking System for Coastal Exposure.

The model calculates the Exposure Index :math:`E` for each shoreline segment as (see, e.g., Gornitz et al., 1990):

.. math:: E = \sqrt{{R_{BioGeological} R_{SLR} R_{WaveWindExposure} R_{Surge}}\over {Count(R_{BioGeological},R_{SLR},R_{WaveWindExposure},R_{Surge})}}
   :label: Expind

where:

+ :math:`R_{BioGeological} = 0.40 R_{Geomorphology} + 0.40 R_{Relief} + 0.20 R_{Habitats}` is a combination of the exposure ranking of the geological and natural habitat variables.  If :math:`R_{Geomorphology}` is lower than 2, then :math:`R_{BioGeological} = R_{Geomorphology}`.  In other words, if the shoreline cannot be eroded after a single event, the presence/absence of natural habitats is not taken into account.

+ :math:`R_{WaveWindExposure} = 0.50 R_{WaveExposure} + 0.50 R_{WindExposure}` represents the average exposure to wind and wave forcing. 
  
+ :math:`Count(R_{BioGeological},R_{SLR},R_{WaveWindExposure},R_{Surge})` represents the sum of the variables that are taken into account.  If any of the four variables (biogeological, Sea Level Rise (SLR), wave and wind exposure, and surge potential) is not taken into account or is equal to zero, then it is removed from the count.  For example, if users decide to ignore SLR because it has the same value everywhere, then they would not upload that layer, and the model will assign by default :math:`R_{SLR} = 1`, and :math:`Count = 3`.

The model will compute an Exposure Index based on the different variables that are defined by users, and users have the option of uploading any or all the variables that are defined in :ref:`table-41`.  The only situation where the Exposure Index is not computed and the model will not run, :math:`E=0`, is when a wind file is not defined. Below, we present a more detailed description of the variables presented in :ref:`table-41`.

.. _cp-Geomorph
Geomorphology
^^^^^^^^^^^^^

Rocky cliffs are less prone to erosion and inundation than bluffs, beaches, or deltas.  Consequently, we adopted and hard-coded a relative ranking of exposure scheme based on geomorphology similar to the one proposed by Hammar-Klose and Thieler (2001).  We provide in :ref:`cp-appendix-a` a definition of the terms used in this classification, which applies mostly to the North American continent.  We will expand this classification to more regions of the world in later versions of this model.  

If the your geomorphology raster file has more categories than the ones presented in :ref:`table-41`, we leave it to your discretion to reclassify your data to match our ranking system, as explained in the :ref:`cp-data-needs` section, and in :ref:`cp-appendix-b`.  We suggest however, that a high cliff is one that is above the 50-year surge level in a region, a low cliff is one that is at or below the 25-year surge level.  

.. _cp-Relief
Relief
^^^^^^

Sites that are above Mean Sea Level (MSL) are at lower risk or inundation than sites that are at MSL.  Based on a Digital Elevation Model (DEM) of the terrestrial area surrounding the marine area under consideration, the model estimates for each shoreline segment the average elevation of the coast over a radius of 1 kilometer.  This resolution was chosen because of the relative coarseness of most available terrestrial DEM. Before ranking them, relief values are normalized by dividing the average relief at a particular site by the mean of all average relief values.  

.. _cp-NatHab
Natural Habitats
^^^^^^^^^^^^^^^^

Natural habitats (marshes, seagrass beds, mangroves, coastal dunes) play a vital role in mitigating the effects of coastal hazards and decreasing the exposure of a coastal area and community.  For example, large waves break on coral reefs before reaching the shoreline, mangroves and coastal forests dramatically reduce wave height in shallow waters, and decrease the strength of wave- and wind-generated currents, seagrass beds and marshes stabilize sediments and encourage the accretion of nearshore beds.  On the other hand, beaches with little to no biological habitats or sand dunes offer little protection to erosion and inundation.  We developed the ranking proposed in :ref:`table-41` based on the fact that fixed and stiff structures that penetrate the water column (e.g., coral reefs, mangroves) and sand dunes are the most able to protect coastal communities.  Flexible and seasonal structures, such as seagrass, reduce flows when they can withstand their force, and encourage accretion of sediments.  Once again, we leave it to the users’ discretion to separate sand dunes into high and low categories.  We suggest however, based on Short and Hesp (1982), that 15m is an appropriate cut-off value to separate high (>15m) and low (<15m) dunes.

To compute a Natural Habitat exposure rank for a given shoreline segment, the model estimates whether a certain class of natural habitat (:ref:`table-41`) is within a user-defined search radius from the segment.  If more than one class of natural habitat are present and within the search radius from the segment, their ranks are allocated back to that segment.  The final exposure rank of the segment is equal to the highest rank value of the various classes fronting the segment.  Currently, the model only detects the presence of seagrass and kelp (see Section 2 and :ref:`cp-appendix-b` for a description of how the model does this).  We will include all the other habitat classes in a future model release.

.. _cp-SLR
Net Sea-Level Change 
^^^^^^^^^^^^^^^^^^^^

The relative net sea level rise/decrease along the coastline of a given region is the sum of global sea-level rise, local sea level rise (eustatic rise) and local land motion (isostatic rise).  As indicated by Gornitz (1990), relative rise values between ±1 do not change current erosion or inundation trends, as they can be considered to be within modeling and measurement error range.  In contrast, values smaller than -1 decrease the exposure, while values above +1 increase the exposure.  Please consult :ref:`cp-appendix-b` for suggestions of how to create this input.

.. _cp-winds:
Wind Exposure
^^^^^^^^^^^^^

Strong  winds constitute a coastal hazard because they can generate high surges  and/or high waves if they blow over an area for a long period of  time.  They can also move debris with tremendous force.  The Wind Exposure variable classifies regions in the area of interest that are exposed to, or sheltered from, strong winds by computing and ranking, for each segment, the Relative Exposure Index (REI; Keddy  1982).  This index is computed, from the top 5% wind speed sub-record  described in the :ref:`cp-data-needs` section, as:

.. math:: REI = { {\sum^16_{n=1}} {U_n P_n F_n} }

where:

+ :math:`U_n` is the average wind speed, in meters per second, in the nth equiangular sector
+ :math:`P_n` is the percent of all wind speeds in the record of interest that blow in the direction of the nth sector
+ :math:`F_n` is the fetch distance, in meters, in the nth sector

For a given coastline segment, the model estimates  the fetch distance over 16 equiangular sectors, with an accuracy of 1km (Finlayson, 2005); maximum fetch distance  is 50km and fetch distance overland is assumed to be zero.  We combine  this fetch distance with a user-input vector of the mean of the highest 5% wind  speeds for each of the 16 sectors, as well as the percent of time when these winds blew in that sector.  :ref:`cp-appendix-b` provides some guidance on where to get this data.  Before ranking them, REI values are normalized by dividing the REI at a particular site by the average of all REI values.

.. _cp-Wave
Wave Exposure  
^^^^^^^^^^^^^^^^^^

We estimate the exposure of an area to wind-waves and swells by computing the average wave power offshore of each segment of shoreline.  Assuming that waves are in deep water, wave power is computed as:

.. math:: P = \frac{1}{2} H^2 T
        :label:WavPow

where:

+ :math:`P` is the wave power, in :math:`kW/m`
+ :math:`H` is the wave height in :math:`m`
+ :math:`T` is the associated wave period in :math:`s`

For regions that are exposed to the open ocean or lakes and bays where local wave information is available, the model estimates wave exposure by evaluating the relative value of the wave power of the highest 5% waves.  For regions that are sheltered from the open ocean, such as estuaries or bays, wave power is estimated from the value of locally generated wind-waves.  Exposed and sheltered regions are defined by using fetch filter: segments are considered exposed unless two or more of the  16 fetches do not exceed a  user-defined distance.  In that case, they are assumed to be sheltered.  

From the fetch distances computed earlier, see the :ref:`cp-wind` section, and the average of the top 5% wind speed that blew in that sector, wave height and period are computed as:

.. math::
  \left\{
   \begin{array}{l}
    \displaystyle H = { {{0.24 U^2}\over g} {\left[{ tanh \left( {4.14 \cdot 10^{-4}} { \left( {{gF}\over U^2} \right) }^{0.79} \right) }\right]}^{0.572} } \\
    \displaystyle \\
    \displaystyle T = { {{7.69 U}\over g} {\left[{ tanh \left( {2.77 \cdot 10^{-7}} { \left( {{gF}\over U^2} \right) }^{1.45} \right) }\right]}^{0.187} } \\
  \end{array} \right.
  :label: WaveFetch

where

+ :math:`F` (m) is the average fetch distance in a particular sector 
+ :math:`U` (m/s) is the maximum wind speed associated with a direction that falls in that sector (we will use all wind speeda in the next model release)
+ :math:`g` (m/s2) is the acceleration of gravity 

This expression does not differentiate between duration and fetch-limited conditions (USACE 2002; Part II Chap 2), and is suited to relatively deep water conditions.  From estimated wave height and period, we compute average wave power by for each sector using Equation :ref:`WavPow`.  The wave power used to define wave exposure for sheltered segment is estimated by taking the average of the two highest power values computed.  Wave power values for exposed and sheltered shoreline segments are normalized by dividing each computed power value by the average of all wave power computed.  Thus, a wave exposure value greater than one indicates a wave exposure greater than average (and a wave exposure <1 indicates less-than-average wave exposure).

.. _cp-Surge
Surge potential
^^^^^^^^^^^^^^^

Storm surge elevation is a function of wind speed and direction, but also of the amount of time wind blows over relatively shallow areas.  In general, the longer the distance between the coastline and the edge of the continental shelf at a given area during a given storm, the higher the storm surge.  Unless a user decides to specify a certain depth contour appropriate to the region of interest, we estimate the relative exposure to storm surges by computing the length of the continental shelf fronting an area of interest.  (For hurricanes, a better approximation might be made by considering the distance between the coastline and the 30 meters depth contour (Irish and Resio 2010)).  

The tool that we use to perform this computation assigns a distance to all segments within the area of interest, even to segments that seem sheltered because they are too far inland, protected by a significant land mass, or on a side of an island that is not exposed to the open ocean.  Consequently, we offer the user the opportunity to define a maximum distance threshold over which shoreline segment within the area of interest will be deemed at low-risk of exposure to storm surge (see :ref:`cp-data-needs` section).  We provide an example of how to estimate this distance in :ref:`cp-appendix-b`.


Limitations and simplifications 
===============================

The primary technical limitation of the model is that we had to sacrifice accuracy for computational efficiency.  Given the limitations of GIS, a raster-based calculation approach was taken, and any procedure that requires the model to evaluate the relative position of objects in space, such as the allocation of the presence of natural habitats to shoreline segments, has the potential to yield errors.  Also, fetch distances are approximated to the nearest kilometer.  Furthermore, while the global dataset of population that we are using, the GRUMP dataset (CIESIN and CIAT 2005), is advantageous because it is derived from census data rather than predictive models, it only represents an estimate of the resident population in all areas.  The GRUMP data does not provide an estimate of the daily or seasonal distribution of population that often varies widely in coastal areas where tourism accounts for a large number of temporary residents.  If better data are available for your region of interest, you can substitute these for the coarser global data.

Beyond technical limitations, the Exposure Index also has theoretical limitations.  One of the main limitations is that we simplified the numerous natural characteristics and extremely complex coastal processes happening in a region into five variables and five exposure categories.  For example, the model does not distinguish between sand and mixed sand beaches; nor does it take into account the slope of bluffs.  More importantly, the model does not consider any hydrodynamic or sediment transport processes.  Consequently, we assume that regions that belong to the same geomorphic exposure class behave in a similar way.  Also, the scoring of exposure is the same everywhere in the region of interest; the model does not take into account any interactions between the different variables in :ref:`table-41`.  For example, the relative exposure to waves and wind will have the same weight whether the site under consideration is a sand beaches or a rocky cliff. 

Consequently, it might under- or over-estimate wind-generated waves characteristics at a site.  However, we believe that this simplification will not misrepresent the overall relative exposure of shoreline segments.

Consequently, model outputs cannot be used to quantify the exposure to erosion and inundation of a specific coastal location; the model produces qualitative outputs and is designed to be used at a relatively large scale.  More importantly, the model does not predict the response of a region to specific storms or wave fields and does not take into account any large-scale sediment transport pathways that may exist in a region of interest.  


.. _cp-data-needs:

Data needs
==========

The model uses an interface to input all required and optional data, and as is outlined in this section, it outputs a population and an exposure index map.  The population map is always produced, but the user has the option of uploading any or all of the variables in :ref:`table-41` to compute the Exposure Index map.  This index can be created with fewer than the five variables required as input.  However, the model always computes fetch distances based on the required input land polygon and polyline (inputs 2 and 3), and it outputs an index value of -1 if a geomorphology layer (input 15) is not provided.  Here we outline the options presented to the user via the interface, and the content and format of the required and optional input data used by the model.  More information on how to fill the input interface or how to obtain data is provided in :ref:`cp-appendix-b`.

1. **Workspace Location (required).** The user is required to specify a workspace folder path.  We recommended creating a new folder for each run of the model.  For example, by creating a folder called "RunWholeCoast" within the "CoastalVulnerability" folder, the model will create "intermediate" and "output" folders within this "RunWholeCoast" workspace.  The "intermediate" folder will compartmentalize data from intermediate processes.  The model’s final outputs will be stored in the "output" folder. ::

     Name: Path to a workspace folder.  Avoid spaces. 
     Sample path: \InVEST\CoastalVulnerability\RunWholeCoast

2. **Land Polygon (required).**  This input provides the model with a geographic shape of the coastal area of interest, and instructs it as to the boundaries of the land and seascape.  A global land mass polygon file is provided as default (Wessel and Smith, 1996), but other layers can be substituted. ::

     Name: File can be named anything, but no spaces in the name
     File type: polygon shapefile (.shp)
     Sample path (default): \InVEST\Base_Data\Marine\Land\global_polygon.shp

3. **Land Polyline (required).**  This input should have the same shape as the Land Polygon (input 2), and must have a feature geometry of polyline instead of polygon. ::

     Name: File can be named anything, but no spaces in the name
     File type: polyline shapefile (.shp)
     Sample path: \InVEST\Base_Data\Marine\Land\global_polyline.shp

4. **Area of Interest (AOI) (required).**  The user must create a polygon feature layer that defines the Area of Interest (AOI).  An AOI instructs the model where to clip the Land Polygon and Land Polyline input data (inputs #2-3) in order to define the spatial extent of the analysis.  

   If the user is including the Surge Potential variable in the computation of the exposure index, the depth contour specified in input #13 must be specified, and the AOI must intersect that contour.  If the AOI does not intersect that contour, the model will stop and provide feedback. ::

     Name: File can be named anything, but no spaces in the name
     File type: polygon shapefile (.shp)
     Sample path: \InVEST\CoastalVulnerability\Input\AOI_BarkClay.shp

5. **Cell Size (meters, required).**  This input determines the spatial resolution at which the model runs and the resolution of the output maps.  To run the model at the minimum 250 x 250 meters grid cell scale, the user should enter "250".  A larger grid cell will yield a lower resolution, but a faster computation time. ::

     Name: A numeric text string (positive integer)
     File type: text string (direct input to the ArcGIS interface)
     Sample (default): 250

6. **Projection (required).**  The model will project or re-project most of the input data in order to keep the model’s various distance calculations consistent.  The projection must have meters as the units and use a WGS84 datum. ::

     File type: projection files provided by ArcGIS (.prj)
     Sample path: Coordinate Systems\Projected Coordinate Systems\UTM\WGS 1984\ WGS 1984 UTM Zone 10N.prj

7. **Indices Table (required).**  The user must provide a summary table to instruct the model on various parameters necessary to calculate the exposure index.  While numbers can be modified -- adding to, deleting, or rearranging the order of cells may produce erroneous results.  The model expects values to be in these specific cells with the exception of the geomorphology listing (yellow) where the number of entries can be increased or decreased.  More information on how to fill this table is provided in :ref:`cp-appendix-b`. ::

     Table Names: File can be named anything, but no spaces in the name
     File type: *.xls or .xlsx (if user has MS Excel 2007 or newer)
     Sample: InVEST\CoastalVulnerability\Input\ExposureIndexParameters_WCVI.xls\Indices$

.. figure:: ./coastal_vulnerability_images/cpindices500.png
   :align: center
   :figwidth: 500px

8. **Population Raster (required).**  A raster layer is required to map the population size along the coastline of the AOI specified (input #4).  A global population raster file is provided as default, but other raster data layers can be substituted. ::

     Name: File can be named anything, but no spaces in the name and less than 13 characters
     Format: standard GIS raster file (ESRI GRID), with population values
     Sample data set (default): \InVEST\Base_Data\Marine\Population\global_pop

9. **Land Area Filter (kilometers squared, optional).**  All landmasses within the AOI are included in fetch calculation, but this input instructs the model to filter out from the output calculation land masses (islands) with an area less than the value specified (in km\ :sup:`2`).  For example, if the user enters "5", the model will only produce outputs for landmasses that have an area greater or equal to 5km\ :sup:`2`.  More information on how to fill this input cell is provided in :ref:`cp-appendix-b`.

   This input should be left blank if (1) the user does not wish to filter out any land masses or (2) the user selects a land polygon and polyline (inputs #2-3) that is different from the default layers provided in the directory "\\InVEST\\Base_Data\\Land\\". ::

     Name: A numeric text string (positive integer)
     File type: text string (direct input to the ArcGIS interface)
     Sample (default):  5

10. **Natural Habitat: Kelp (optional).**  This input layer is used to compute a Natural Habitat ranking for each shoreline segment (see :ref:`table-41`), and should consist of the location of kelp beds (which will be clipped by the model within the AOI, input 4).  The distance at which this layer will have a protective influence on coastline can be modified in the indices tables (input 7). ::

     Name: File can be named anything, but no spaces in the name
     File type: polygon shapefile (.shp)
     Sample path: \InVEST\CoastalVulnerability\Input\kelp_CRIMS.shp

11. **Natural Habitat: Seagrass (optional).**  This input layer is used to compute a Natural Habitat ranking for each shoreline segment (see :ref:`table-41`), and should consist of the location of seagrass beds (which again will be clipped by the model within the AOI, input 4).  The distance at which this layer will have a protective influence on coastline can be modified in the indices table (input 7). ::

     Name: File can be named anything, but no spaces in the name
     File type: polygon shapefile (.shp)
     Sample path: \InVEST\CoastalVulnerability\Input\seagrass_CRIMS.shp

12. **Sea Level Rise: Polygon Indicating Net Rise or Decrease (optional).**  This input must be a polygon delineating regions within the AOI that experience various levels of net sea level change.  It must have a field called "RANK" that orders the net change values according to :ref:`table-41`.  More information on how to create this polygon is provided in the Marine InVEST :ref:`FAQ`, and in :ref:`cp-appendix-b`. ::

     Name: File can be named anything, but no spaces in the name
     File type: polygon shapefile (.shp)
     Sample path: \InVEST\CoastalVulnerability\Input\SeaLevRise_WCVI.shp

13. **Surge Potential: Continental Shelf (optional).**  This input is a global polygon dataset that depicts the location of the continental margin.  It must intersect with the AOI polygon (input #4). ::

     Names: File can be named anything, but no spaces in the name
     File type: polygon shapefile (.shp)
     Sample path:  \InVEST\CoastalVulnerability\Input\continentalShelf.shp

14. **Wind-Wave Exposure: Wind Vector List (optional).**  This input is used to compute the Wind-wave Exposure ranking of each shoreline segment (:ref:`table-41`).  It consists of a text file (.txt) with two lines for the speed (in meters/seconds, line 1) and associated direction (in degrees (0-360), line 2) of the highest 5% winds measured near the AOI (input #4).  Input values should represent the 5 to 10 minutes averaged wind speeds; they should not correspond to gust speeds. ::

     Table Names: File can be named anything, but no spaces in the name
     File type: *.txt
     Sample: \InVEST\CoastalVulnerability\Input\WindVectorList.txt

15. **Geomorphology: Shoreline Type (required).**  This input, of geometry type "polyline", is used to compute the Geomorphology ranking of each shoreline segment (:ref:`table-41`).  It does not have to match the land polyline input (input #3), but must resemble it as closely as possible.  Additionally, the polyline shapefile must have a field called "ID" that identifies the various shoreline types with a number.  The user must assign a corresponding rank value to each ID in the indices table (input #7).  More information on how to fill in this table is provided in :ref:`cp-appendix-b`. ::

     Names: File can be named anything, but no spaces in the name
     File type: polyline shapefile (.shp)
     Sample path: \InVEST\CoastalVulnerability\Input\Shorezone_VI.shp


Running the model
=================

Setting up workspace and input folders
--------------------------------------

These folders will hold all input, intermediate and output data for the model.  As with all folders for ArcGIS, these folder names must not contain any spaces or symbols.  See the sample data for an example.

.. note:: The word *‘path’* means to navigate or drill down into a folder structure using the Open Folder dialog window that is used to select GIS layers or Excel worksheets for model input data or parameters. 

Exploring a project workspace and input data folder  
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The */InVEST/CoastalVulnerability* folder holds the main working folder for the model and all other associated folders. Within the *CoastalVulnerability* folder there will be a subfolder named *‘Input’*. This folder holds most of the GIS and tabular data needed to setup and run the model. 

The following image shows the sample input (on the left) and base data (on the right) folder structures and accompanying GIS data.  We recommend using this folder structure as a guide to organize your workspaces and data. Refer to the screenshots below for examples of folder structure and data organization.

+----------------------------------------------------------+----------------------------------------------------------+
| .. image:: ./coastal_vulnerability_images/cpdataorgA.png | .. image:: ./coastal_vulnerability_images/cpdataorgB.png |  
+----------------------------------------------------------+----------------------------------------------------------+


Creating a run of the model
---------------------------

The following example of setting up the Coastal Vulnerability model uses the sample data provided with the InVEST download. The instructions and screenshots refer to the sample data and folder structure supplied with the InVEST installation package. It is expected that users will have location-specific data to use in place of the sample data. These instructions provide only a guideline on how to specify to ArcGIS the various types of data needed and does not represent any site-specific model parameters. See the :ref:`cp-data-needs` section for a more complete description of the data specified below. 

1. Click the plus symbol next to the InVEST toolbox. 

.. figure:: ./shared_images/investtoolbox.png
   :align: center
   :figwidth: 500px

2. Expand the Marine toolset and click on the Coastal Vulnerability script to open the model. 

.. figure:: ./coastal_vulnerability_images/cptool350.png
   :align: center
   :figwidth: 500px

3. Specify the Workspace. Click on the Open Folder button |openfold| and path to the *InVEST/CoastalVulnerability* folder. If you created your own workspace folder (Step 2), then select it here.

   Click on the *CoastalVulnerability* folder and click on |addbutt| set the main model workspace.  This is the folder in which you will find the intermediate and final outputs when the model is run.  

4. Specify the Land Polygon. The model requires a land polygon shapefile to define the shoreline for the analysis. This shapefile will be supplied in the model window for you.

5. Specify the Land Polyline. The model requires a land polyline shapefile to define the shoreline for the analysis. This shapefile will be supplied in the model window for you.

6. Specify the Land Area Filter (Optional).  If you select this option, the model requires a land area filter parameter. The default value is given as 5 square kilometers. You can change this value by directly typing into the text box and entering another value.  

7. Specify the Area of Interest (AOI). The model requires an AOI, which is the geographic area over which the model will be run. This example refers to the *AOI_BarkClay.shp* shapefile supplied in the sample data. You can create an AOI shapefile by following the Creating an AOI instructions in the :ref:`getting-started` section.

   Open |openfold| the *InVEST/CoastalVulnerability/Input* data folder. Select the AOI_BarkClay.shp shapefile and click |addbutt| to make the selection.  

8. Specify the Cell Size. The model requires a cell size for the raster analysis. The default cell size is 250 meters. You may change this value by entering a new value directly into the text box.  

9. Specify the Projection. The Projection file is specified to set the projection and coordinate information necessary to run the overlay analysis. Open |openfold| the Coordinate Systems folder near the bottom of the Look In list and path to the *UTM/WGS 1984* folder. 

   Select the WGS 1984 UTM Zone 10N.prj projection file and click |addbutt| to add it to the model dialog window.  

.. use image from the wave energy model
.. figure:: ./wave_energy_images/wemprojection350.png
   :align: center
   :figwidth: 500px

.. note:: It is assumed that all of your input data are in the same projection and coordinate systems with matching datum. If you need to (re-)project your data, see the Projection section in the :ref:`FAQ` and/or the :ref:`getting-started` section.

.. use image from the wave energy model
.. figure:: ./wave_energy_images/wemprojectionB350.png
   :align: center
   :figwidth: 500px

10. Specify the Indices Table. The model requires a table of exposure indices stored in a Worksheet in an Excel workbook file (.xls). See the :ref:`cp-data-needs` section for more information on creating and formatting these data.  This worksheet will be supplied for you.  

    Click |openfold| and path to the *InVEST/CoastalVulnerability/Input* data folder. Double left-click on the Excel file *ExposureIndexParameters_WCVI.xls* and select the worksheet *Indices$*. 

    Click |addbutt| to make the selection.

.. note:: ArcMap and the model will not recognize the Excel sheet as valid data if it is added to the Data View. It is best to specify Excel data directly in the model dialog window using the Open folder and Add buttons and navigating to the data. 

11. Specify the Global Population Raster. This is a global population raster with population assigned to each cell value. This raster will be supplied in the model window for you. Click |openfold| and path to the *InVEST/Base_Data/Marine/Population* folder. Select the *global_pop* raster and click |addbutt| to make the selection.
 
12. Specify the Natural Habitat: Kelp (Optional). The model can use an optional polygon shapefile that represents kelp habitat. Click |openfold| and path to the *InVEST/CoastalVulnerability/Input* data folder. Select the *kelp_CRIMS.shp* shapefile and click |addbutt| to make the selection.

13. Specify the Natural Habitat: Seagrass (Optional). The model can use an optional polygon shapefile that represents seagrass habitat. Click |openfold| and path to the *InVEST/CoastalVulnerability/Input* data folder. Select the *seagrass_CRIMS.shp* shapefile and click |addbutt| to make the selection.
  
14. Specify the Sea Level Rise polygon (Optional). The model can use an optional polygon shapefile that represents sea level rise potential. Click |openfold| and path to the *InVEST/CoastalVulnerability/Input* data folder. Select the *SeaLevRise_WCVI.shp* shapefile and click |addbutt| to make the selection.  

15. Specify the Surge Potential data (Optional). To represent surge potential, the model uses a continental shelf polygon shapefile. Click |openfold| and path to the *InVEST/CoastalVulnerability/Input* data folder. Select the *continentalShelf.shp* shapefile and click |addbutt| to make the selection.  

16. Specify the Wind-Wave Exposure data (Optional). The model can use an optional text file that represents wind exposure. See the :ref:`cp-data-needs` section for details on preparing these data and formatting the text file. Click |openfold| and path to the *InVEST/CoastalVulnerability/Input* data folder. Select the *WindVectorList.txt* textfile and click |addbutt| to make the selection.
  
17. Specify the Geomorphology (Required). The model requires a polyline shapefile that represents shoreline geomorphology. Click |openfold| and path to the *InVEST/CoastalVulnerability/Input* data folder. Select the *Shorezone_VI.shp* shapefile and click |addbutt| to make the selection. 

18. At this point the model dialog box is completed for a complete run (with all optional data for full exposure analysis) of the Coastal Vulnerability model. 

    Click |okbutt| to start the model run. The model will begin to run and a show a progress window with progress information about each step in the analysis. Once the model finishes, the progress window will show all the completed steps and the amount of time that has elapsed during the model run. 

.. figure:: ./coastal_vulnerability_images/cptoolfilled350.png
   :align: center
   :figwidth: 500px

.. figure:: ./coastal_vulnerability_images/cpcompleted350.png
   :align: center
   :figwidth: 500px

 
Viewing output from the model
-----------------------------

Upon successful completion of the model, two new folders called "intermediate" and "Output" will be created in the workspace. The Output folder, in particular, may contain several types of spatial data, each of which are described the :ref:`cp-interpreting-results` section.

.. figure:: ./coastal_vulnerability_images/cpoutputdirs.png
   :align: center
   :figwidth: 500px

To view the output spatial data in ArcMap (from either the Intermediate or Output folders) click the Add Data button |adddata| and select the four files highlighted in the figure below. 

.. figure:: ./coastal_vulnerability_images/cpoutputdir350.png
   :align: center
   :figwidth: 500px

To navigate between the different fields contained in the "exp_index" outputs, or to change the symbology of a layer, right-click on the layer name in the table of contents, select "Properties", and then "Symbology".  There are many options here to change the way the data appear in the map.  

+---------------------------------------------------------------+--------------------------------------------------------------------+
| .. image:: ./coastal_vulnerability_images/cplayersmenu200.png | .. image:: ./coastal_vulnerability_images/cplayerproperties300.png |  
+---------------------------------------------------------------+--------------------------------------------------------------------+

.. figure:: ./coastal_vulnerability_images/cpoutmap350.png
   :align: center
   :figwidth: 500px

To navigate quickly between maps of output fields in the "exp_index" layer, we recommend you copy and paste the "exp_index" layer in the workspace:

+-------------------------------------------------------------------+--------------------------------------------------------------------+
| .. image:: ./coastal_vulnerability_images/cplayersmenucopy200.png | .. image:: ./coastal_vulnerability_images/cplayersmenupaste200.png |  
+-------------------------------------------------------------------+--------------------------------------------------------------------+

Finally, to generate a different map of outputs based on any other preferred relationship than the one presented in Equation :eq:`eq1` (see Gornitz 1990 for examples of other ways of computing the exposure index), we recommend creating a new field in the Attribute table:

+-------------------------------------------------------------------+---------------------------------------------------------------+
| .. image:: ./coastal_vulnerability_images/cplayersmenuopen200.png | .. image:: ./coastal_vulnerability_images/cpattributes350.png |  
+-------------------------------------------------------------------+---------------------------------------------------------------+

Once the new field is created, it can be named "New_Index" (for example).  After it is created, you can manipulate the various fields in any possible way using the field calculator:

.. figure:: ./coastal_vulnerability_images/cpcalculatorA350.png
   :align: center
   :figwidth: 500px

.. figure:: ./coastal_vulnerability_images/cpcalculatorB350.png
   :align: center
   :figwidth: 500px

We encourage the user to view as many fields in the outputs as necessary to develop an understanding of how the values of the different variables used to compute the exposure index change along the Area of Interest, and to view the optional outputs described in the :ref:`cp-interpreting-results` section.  


.. _cp-interpreting-results:

Interpreting results
====================

Model outputs
-------------

The following is a short description of each of the outputs from the Coastal Vulnerability model.  Each of these output files is saved in the "Output" folder that is located within the user-specified workspace directory:

Output folder
^^^^^^^^^^^^^

+ Output\\exp_index

  + This raster layer contains important statistics used to determine coastal exposure.
  + The raster contains a variety of fields, including:

    + EI – the exposure index
    + WINDEXP –  ranking (1-5) for wind exposure component of the index
    + WAVEEXP – ranking (1-5) for wave exposure component of the index
    + SURGPOT – ranking (0-5) for surge potential component of the index
    + BIOPHYS – ranking (0-5) for biophysical component of the index
    + GEOMORPH – ranking (0-5) for geomorphology component of the index
    + VEG_RC – combine impact of all vegetation inputs
    + SZ_RC – the shoreline types allocated to each coastline segment
    + COSTDIST_RC – distance to continental shelf from each coastline segment 
    + SLR_RC – expected sea level rise rankings
    + FFILT – coastline segments with low (0) and high (1) exposure based on number of fetch directions exceeding a distance threshold
    + REI_T5 – relative exposure index as calculated from wind
    + HS – maximum wave height as calculated from wind
    + TP – wave period as calculated from wind associated with HS
    + WP – wave power as calculated from wind

+ Output\\coast_vuln

  + This raster layer contains only values from the EI field of output #1 and is automatically symbolized when added to ArcMap.

+ Output\\coast_pop

  + This raster layer depicts population extracted from the global population input layer, but only for areas along the coast and within the user-specified area of interest.
  + The values this dataset represents are the number of people within each grid cell.  The size of the grid cells is determined by the user.

+ Output\\coast_pop_pts.shp

  + The point feature layer contains points along the coastline only where people live.
  + This layer can easily be symbolized by importing the symbology from the file \\InVEST\\CoastalVulnerability\\Input\\coast_pop_pts.lyr

+ Output\\coastPoly_prj.shp

  + This polygon feature layer displays the clipped landmass within the AOI and is projected based on the projection specified by the user.
  + This layer is most useful when added to ArcMap and moved below all other output layers in the ordering hierarchy.

.. figure:: ./coastal_vulnerability_images/cpoutputclasses350.png
   :align: center
   :figwidth: 500px

Intermediate folder
^^^^^^^^^^^^^^^^^^^

+ intermediate\\fetch

  + This is a folder containing all 16 directional fetch calculations in raster format.  Each direction has also been reclassed and expanded in order for the model to extract a fetch value for each coastline pixel.

+ intermediate\\veg

  + This is a folder containing calculations for determining biogenic habitat’s reach in terms of coastal protection.  The reach distance of the two types of vegetation is set in the indices table (input #7).  There will either be 1 or 2 files within this folder, depending on whether the user specifies both kelp and seagrasses as inputs.

+ intermediate\\veg_rc

  + This raster layer compiles the combine impact of all vegetation inputs.  A value of 4 indicates areas where vegetation may impact coastal protection and a value = 5 means no impact.

+ intermediate\\landsea_rst

  + This raster layer indicates areas of land (value = 1) and sea (value = 0) within the AOI and is used by the model to calculate fetch and distance to shelf.

+ intermediate\\slr_rc

  + This raster layer indicates the expected sea level rise rankings within the AOI and is used as part of the exposure index.

+ intermediate\\sz_rc

  + This raster layer depicts how shoreline types were allocated to various sectors of coastline based on the polyline input #15 (geomorphology).  


Parameter log
-------------

Each time the module is run a text file will appear in the workspace folder.  The file will list the parameter values for that run and be named according to the service and the date and time.


.. _cp-appendix-a:

Appendix A
==========

Here we provide definitions for the terms presented in the geomorphic classification in :ref:`table-41`.  Some of these are from Gornitz et al. (1997) and USACE (2002). 

Alluvial Plain
  A plain bordering a river, formed by the deposition of material eroded from areas of higher elevation.

Barrier Beach
  Narrow strip of beach with a single ridge and often foredunes.  In its most general sense, a barrier refers to accumulations of sand or gravel lying above high tide along a coast.  It may be partially or fully detached from the mainland. 

Beach
  A beach is generally made up of sand, cobbles, or boulders and is defined as the portion of the coastal area that is directly affected by wave action and that is terminated inland by a sea cliff, a dune field, or the presence of permanent vegetation.

Bluff
  A high, steep back or cliff

Cliffed Coasts
  Coasts with cliffs and other abrupt changes in slope at the ocean land interface. Cliffs indicate marine erosion and imply that the sediment supply of the given coastal segment is low. The cliff’s height depends upon the topography of the hinterland, lithology of the area, and climate.

Delta
  Accumulations of fine-grained sedimentary deposits at the mouth of a river.  The sediment is accumulating faster than wave erosion and subsidence can remove it.  These are associated with mud flats and salt marshes.

Estuary Coast
  Tidal mouth of a river or submerged river valley.  Often defined to include any semi-enclosed coastal body of water diluted by freshwater, thus includes most bays.  The estuaries are subjected to tidal influences with sedimentation rates and tidal ranges such that deltaic accumulations are absent. Also, estuaries are associated with relatively low-lying hinterlands, mud flats, and salt marshes.

Fiard
  Glacially eroded inlet located on low-lying rocky coasts (other terms used include sea inlets, fjardur, and firth). 

Fjord
  A narrow, deep, steep-walled inlet of the sea, usually formed by entrance of the sea into a deep glacial trough.

Glacial Drift
  A collective term which includes a wide range of sediments deposited during the ice age by glaciers, melt-water streams and wind action.

Indented Coast
  Rocky coast with headland and bays that is the result of differential erosion of rocks of different strength.

Lagoon
  A shallow water body separated from the open sea by sand islands (e.g., barrier islands) or coral reefs.

Mud Flat
  A level area of fine silt and clay along a shore alternately covered or uncovered by the tide or covered by shallow water.


.. _cp-appendix-b:

Appendix B
==========

The model requires large-scale geo-physical, biological, atmospheric, and population data.  Most of this information can be gathered from past surveys, meteorological and oceanographic devices, and default databases provided with the model.  In this section, we propose various sources for the different data layers that are required by the model, and we suggest methods to fill out the input interface discussed in the :ref:`cp-data-needs` section.  We recommend that the user import all the required and optional data layers before attempting to run the model.  Familiarity with data layers will facilitate the preparation of data inputs.  


Population data
---------------

To assess the population residing near any segment of coastline, we use population data from the Global Rural-Urban Mapping Project (`GRUMP <http://sedac.ciesin.columbia.edu/gpw>`_).  This dataset contains global estimates of human populations in the year 2000 in 30 arc-second (1km) grid cells.  You can use your own, more detailed and/or recent census data, and we encourage you to use recent fine-scale population maps, even in paper form, to aid in the interpretation of the Exposure Index map.

Geo-physical data layer
-----------------------

To estimate the Exposure Index of the AOI, the model requires an outline of the coastal region.  As mentioned in the :ref:`cp-data-needs` Section, we provide a default global land mass polygon file.  This default dataset, provided by the U.S. National Oceanic and Atmospheric Administration (NOAA) is named GSHHS, or a Global Self-consistent, Hierarchical, High-resolution Shoreline (for more information, visit http://www.ngdc.noaa.gov/mgg/shorelines/gshhs.html).  It should be sufficient to represent the outline of most coastal regions of the world.  However, if this outline is not sufficient, we encourage you to substitute it with another layer.  

To compute the Geomorphology ranking, the user must provide a geomorphology layer (:ref:`cp-data-needs` Section, input 15) and an associated geomorphic classification map.  This map should provide the location and type of geomorphic features that are located in the coastal area of interest.  In some parts of the west-coast of the United States and Canada, such a map can be built from a database called `Shorezone <http://www.geobc.gov.bc.ca>`_.  If such a database is not available, we recommend building such a database from site surveys information, aerial photos, geologic maps, or satellites images (using Google or Bing Maps, for example).

In addition to the geomorphology layer, the user must fill a Geomorphology table in the Indices Tables Excel file (ExposureIndexParameters.xls, see input 7 in the :ref:`cp-data-needs` Section).  The table is used by the model to assign a geomorphology exposure ranking based on the different geomorphic classes identified.  To fill out the Geomorphology table, we recommend pasting into the first two columns all the geomorphic classes that are in your AOI and their corresponding ID’s in the geomorphology GIS layer.  Then you need to assign a rank to those ID’s, based on the classification we presented in :ref:`table-41`.  There is no limit to the number of unique geomorphology layer types, but the table must start with ID=1 and follow with consecutive integers.   A placeholder may be used to preserve the sequence.

Habitat data layer
------------------

The natural habitat maps (inputs 10 and 11 in the :ref:`cp-data-needs` Section) should provide information about the location and types of coastal habitats described in :ref:`table-41`.  In some parts of the west coast of the United States and Canada, such a map can be built from a database called `Shorezone <http://www.geobc.gov.bc.ca>`_.  If such a database is not available, we recommend building it from site surveys information, aerial photos, or even satellites images (using Google or Bing Maps, for example).

The model determines the presence or absence of various user-specified natural habitats in the AOI by estimating the fetch distance over 16 equiangular segments between the location of the natural habitats and the shoreline.  If there is a non-zero fetch distance between a patch of natural habitat and a shoreline segment, the model knows that the patch fronts that segment.  To assign a natural habitat ranking to that segment that takes into account the beneficial effect of the presence of this habitat, we ask the user to input a maximum distance of influence into the Natural Habitat table in the Indices Tables Excel file (ExposureIndexParameters, see input 7 in the :ref:`cp-data-needs` Section).  We assume that natural habitats that are fronting a segment but are further away from the segment that the user-defined distance will not have a beneficial effect on the stability of that segment, and will not be counted in the Natural Habitat ranking for that segment.

To estimate this distance, we recommend loading the various habitat layers (inputs 10 and 11) as well as the global polygon layer (input 1) and then zooming into the area of interest (AOI, input 4).  Then, we recommend using the "distance tool" to measure the distance between the shoreline and natural habitats that you judge to be close enough to have an effect on nearshore coastal processes.  It is best to take multiple measurements and develop a sense of an average acceptable distance that can serve as input.  Please keep in mind that this distance is reflective of the local bathymetry conditions (a seagrass bed can extend for kilometers seaward in shallow nearshore regions) but also of the quality of the geospatial referencing of the input layer.  The example below gives an example of such measurement when seagrass beds are considered (green patches).  

.. figure:: ./coastal_vulnerability_images/cpmeasure.png
   :align: center
   :figwidth: 500px

Wind data
---------

To estimate the importance of wind-generated waves, and to express the relative exposure of shoreline segments to wind forces, we require the user to upload the highest 5% wind speeds and associated direction measured in the vicinity of the AOI.  We recommend that this input data be derived from at least 10 years of measurement.  The `National Data Buoy Center <http://www.ndbc.noaa.gov/>`_ provides links to maritime buoys that are located in, and maintained by, various countries around the world.  Other sources of data are local airports, or `Weather Underground <http://www.wunderground.com/>`_, which provides records of measurements taken by certified, and sometimes uncertified, sources.

As described in "The Model" section "Winds", the model provides an optional map of areas that are exposed or sheltered.  This is purely based on fetch distances, and does not take into account measurements of wind speeds.  To prepare this map, the model uses a user-input estimate of a fetch distance cutoff to use, based on the AOI under consideration.  To provide that distance, we recommend using the "distance tool" on the global polygon layer (input 1), zoomed into the AOI, to determine that distance.

Sea level change
----------------

As mentioned earlier, the model requires a map of net rates of sea level rise or decrease in the AOI.  Such information can be found in reports or publications on Sea Level Change or Sea Level Rise in the region of interest.  Otherwise, we suggest that the user generate such information from tide gage measurements, or based on values obtained for nearby regions that are assumed to behave in a similar way.  A good global source of data for tide gage measurements to be used in the context of sea level rise is the `Permanent Service for Sea Level <http://www.psmsl.org/>`_.  This site has corrected, and sometimes uncorrected, data on sea-level variation for many locations around the world.  From the tide gage measurements provided by this website, we suggest that users estimate the rate of sea level variation by fitting these observations to a linear regression, as shown in the figure below.  This figure was extracted from *"Projected sea level changes for British Columbia in the 21st century"* by B. Bornhold (2008).

.. figure:: ./coastal_vulnerability_images/cpgmslr350.png
   :align: center
   :figwidth: 500px

Create a sea level change GIS layer
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Users can create their own polygon used as the sea level change input to the model.  To create the feature class, the map window must be in "data view" mode.  Select the "Drawing" drop-down option and begin creating a polygon similar to the black feature below.  Double click to complete the polygon.  Next, click "Drawing >> Convert Graphics to Features…"  Specify the path of the output shapefile or feature class and a name that will clearly designate the extent.  Finally, check the box: "Automatically delete graphics after conversion" and click "OK".  Once all polygons for specific regions are created, the user must create an attribute field called "RANK" and populate it with either a value of 1, 3, or 5 indicating the net change values according to :ref:`table-41`.  For more information on how to create a Sea Level Change layer, see the :ref:`FAQ`.

Surge potential
---------------

Surge potential is estimated as the distance between a shoreline segment and the edge of the continental shelf, or any other depth contour of interest.  This output is computed using a method that does not take into account the presence of land barriers between a shoreline segment and the depth contour.  If the user feels that segments that are within the AOI are too far from the open ocean to be affected by surges, in the *ExposureIndexParameters* table we offer the possibility of limiting the search distance to areas that are closer than the maximum distance.  

To fill the Surge Potential table in the *ExposureIndexParameters*, we recommend loading the global polygon layer (input 1) and the continental shelf (or other preferred depth contour, input 13), zoomed in to the AOI, and using the "distance tool" (see previous section).  An example of such measurement is given below in the case of Vancouver Island, for which we believed that storm surges on the west coast would not affect the east coast of the island.

.. figure:: ./coastal_vulnerability_images/cpshelf350.png
   :align: center
   :figwidth: 500px


References
==========

Bush, D.M.; Neal, W.J.; Young, R.S., and Pilkey, O.H. (1999). Utilization of geoindicators for rapid assessment of coastal-hazard risk and mitigation. Oc. and Coast. Manag., 42.

Center for International Earth Science Information Network (CIESIN), Columbia University; and Centro Internacional de Agricultura Tropical (CIAT) (2005). Gridded Population of the World Version 3 (GPWv3). Palisades, NY: Socioeconomic Data and Applications Center (SEDAC), Columbia University. 

Cooper J., and McLaughlin S. (1998). Contemporary multidisciplinary approaches to coastal classification and environmental risk analysis. J. Coastal Res. 14(2):512–524  

Finlayson, D. 2005, fetch program, USGS. Accessed February 2010, from http://sites.google.com/site/davidpfinlayson/Home/programming/fetch

Gornitz, V. (1990). Vulnerability of the east coast, U.S.A. to future sea level rise. JCR, 9.

Gornitz, V. M., Beaty, T.W., and R.C. Daniels (1997).  A coastal hazards database for the U.S. West Coast. ORNL/CDIAC-81, NDP-043C: Oak Ridge National Laboratory, Oak Ridge, Tennessee.

Hammar-Klose and Thieler, E.R. (2001). Coastal Vulnerability to Sea-Level Rise: A Preliminary Database for the U.S. Atlantic, Pacific, and Gulf of Mexico Coasts. U.S. Geological Survey, Digital Data Series DDS-68, 1 CD-ROM

Irish, J.L., and Resio, D.T., "A hydrodynamics-based surge scale for hurricanes," Ocean Eng., Vol. 37(1), 69-81, 2010.

Keddy, P. A. (1982). Quantifying within-lake gradients of wave energy: Interrelationships of wave energy, substrate particle size, and shoreline plants in Axe Lake, Ontario. Aquatic Botany 14, 41-58. 

Short AD, Hesp PA (1982).  Wave, beach and dune interactions in south eastern Australia. Mar Geol 48:259–284

U.S. Army Corps of Engineers (USACE). 2002. U.S. Army Corps of Engineers Coastal Engineering Manual (CEM) EM 1110-2-1100 Vicksburg, Mississippi.

Wessel, P., and W. H. F. Smith (1996).  A Global Self-consistent, Hierarchical, High-resolution Shoreline Database, J. Geophys. Res., 101, #B4, pp. 8741-8743. 

World Resources Institute (WRI) (2009). "Value of Coral Reefs & Mangroves in the Caribbean, Economic Valuation Methodology V3.0".  


