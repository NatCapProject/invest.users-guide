.. _coastal-blue-carbon:

*******************
Coastal Blue Carbon
*******************

Summary
=======


Introduction
============


The Model
=========

Modeling Considerations
-----------------------


How it Works
------------


Limitations and Simplifications
===============================


Data Needs
==========


Running the Model (UPDATED)
===========================

Coastal Blue Carbon Preprocessor
--------------------------------

Overview
~~~~~~~~

The preprocessor is used to detect which land cover types transition to other land cover types between snapshots and the direction in which carbon transfer occurs.  The output of the preprocessor is a land-cover carbon transfer transition matrix with prepopulated values.

Land Cover Transition Types:

* Carbon Accumulation
  * Non-Vegetated --> Vegetated
  * Vegetated --> Vegetated
* Carbon Disturbance
  * Vegetated --> Non-Vegetated
* Unchanged
  * Non-Vegetated --> Non-Vegetated

Inputs
~~~~~~

1. **Workspace Folder**:  The selected folder is used as the workspace where all intermediate and final output files will be written.  If the selected folder does not exist, it will be created.  If datasets already exist in the selected folder, they will be overwritten.

2. **Results Suffix (Optional)**:  This text will be appended to the end of the yield function output folders to help seperate outputs from multiple runs.  Please see the `Interpreting Results`_ section for an example folder structure for outputs.

3. **Land-Cover Lookup Table (CSV)**:  A CSV table used to 

 ==========  =====  ======
 land-cover  code   is_veg
 ==========  =====  ======
 <str>       <int>  <bool>
 ...         ...    ...
 ==========  =====  ======

4. **Land-Cover Snapshots (Rasters)**:  A set of GDAL-supported rasters representing the land-cover scenario at a particular year.

  +---+---+
  |int|int|
  +---+---+
  |int|int|
  +---+---+

**Snapshot Year**: Corresponding year for a given land-use/land-cover snapshot



Coastal Blue Carbon Model
-------------------------

**Workspace Folder**:  The selected folder is used as the workspace where all intermediate and final output files will be written.  If the selected folder does not exist, it will be created.  If datasets already exist in the selected folder, they will be overwritten.

**Results Suffix (Optional)**:  This text will be appended to the end of the yield function output folders to help seperate outputs from multiple runs.  Please see the `Interpreting Results`_ section for an example folder structure for outputs.

**Habitat Transition Effect on Carbon Emissions (CSV)**: Generated by the preprocessor.  This file must be edited before it can be used by the main model.

 =======  ======  ======  =====
 habitat  <hab1>  <hab2>  ...
 =======  ======  ======  =====
 <hab1>   <str>   <str>   ...
 <hab2>   <str>   <str>   ...
 ...      ...     ...     ...
 =======  ======  ======  =====

**Carbon Pool Initial Conditions Table (CSV)**: The provided CSV table contains information related to the initial conditions of the carbon stock within each of the four pools of a habitat.

 =======  ============  =============  =============  =======  =======
 habitat  habitat-type  biomass-above  biomass-below  soil     litter
 =======  ============  =============  =============  =======  =======
 <str>    <str>         <float>        <float>        <float>  <float>
 <str>    <str>         <float>        <float>        <float>  <float>
 ...      ...           ...            ...            ...      ...
 =======  ============  =============  =============  =======  =======

**Table of Transient Variables for Carbon Transfer (CSV)**: The provided CSV table contains information related to carbon transfer.

 ========  =======  ==========  ============  ===============  ==================  ================
 habitat   pool     decay-rate  accumulation  low-disturbance  medium-disturbance  high-disturbance
 ========  =======  ==========  ============  ===============  ==================  ================
 non-veg   biomass  <float>     0             0                0                   0
 non-veg   soil     <float>     0             0                0                   0
 marsh     biomass  <float>     <float>       <float>          <float>             <float>
 marsh     soil     <float>     <float>       <float>          <float>             <float>
 mangrove  biomass  <float>     <float>       <float>          <float>             <float>
 mangrove  soil     <float>     <float>       <float>          <float>             <float>
 seagrass  biomass  <float>     <float>       <float>          <float>             <float>
 seagrass  soil     <float>     <float>       <float>          <float>             <float>
 ...       ...      ...         ...           ...              ...                 ...
 ========  =======  ==========  ============  ===============  ==================  ================


******Economic Inputs*******

**Discount Rate of Carbon**: A percent value reflecting the preference for immediate benefits over future benefits. If the rate is set equal to zero percent then (future prices?) values are not discounted (for present day/NPV?).  Units are in MtCO2e(?)

****Price Options****

**Use Carbon Price Schedule Table**: If this checkbox is selected, the price schedule table (Carbon Price Table?) will be used for valuation. If left unselected, the model will use the base year carbon value and an inflation rate.

**Carbon Price Schedule Table (CSV)**: A table of values containing the price per megatonne of carbon-dioxide equivalent (Price/MtCO2e).  The table should include the base year, the analysis year, and all years inbetween.

 =====  =======
 Year   Price
 =====  =======
 <int>  <float>
 ...    ...
 =====  =======

**Carbon Price during Base Year**: Units are in Price per MtCO2e.  A float value representing the estimated social cost of carbon or private market value for a sequestered ton of carbon dioxide (CONFUSING!  cost --> carbon emissions,  market value --> carbon sequestration).

**Yearly Inflation Rate of Carbon Price**: A percent value representing the yearly inflation rate for the price per megatonne of carbon-dioxide equivalent (Price/MtCO2e).




Interpreting Results
====================

Coastal Blue Carbon Preprocessor
--------------------------------

**Output Folder Structure**

.. code::

  .
  |-- outputs
      |-- habitat_transition_matrix.csv

**Outputs**

1. **Habitat Transition Effect on Carbon Emissions (CSV)**

 =======  ======  ======  =====
 habitat  <hab1>  <hab2>  ...
 =======  ======  ======  =====
 <hab1>   <str>   <str>   ...
 <hab2>   <str>   <str>   ...
 ...      ...     ...     ...
 =======  ======  ======  =====


Coastal Blue Carbon Model
-------------------------

**Output Folder Structure**

.. code::

  .
  |-- outputs
      |-- stock.tif (at snapshots)
      |-- net_sequestration.tif (between snapshots)
      |-- net_present_value.tif (between snapshots) ? is there a better price metric?


**Outputs**

1. **Stock Rasters**:

2. **Net Sequestration Rasters**:

3. **Net Present Value Rasters**:




Example Use-Case
================



References
==========



========================




**Habitat Classification Table**: A key-value table mapping a coastal habitat to a habitat-type.  This allows a user to use many land-cover types.

 =======  ============
 habitat  habitat-type
 =======  ============
 <str>    <str>
 <str>    <str>
 ...      ...
 =======  ============

**Habitat-Type Transition Matrix (CSV)**: A CSV table describing whether a transition from habitat-type to another results in carbon accumulation over time or a carbon "distrubance" that results in carbon emissions over time.

 ============  ===========  ===========  =====
 habitat-type  <hab-type1>  <hab-type2>  ...
 ============  ===========  ===========  =====
 <hab-type1>   <str>        <str>        ...
 <hab-type2>   <str>        <str>        ...
 ...           ...          ...          ...
 ============  ===========  ===========  =====

